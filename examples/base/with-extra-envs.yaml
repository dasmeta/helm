# helm diff upgrade --install -n localhost with-extra-envs ./charts/base/ -f ./examples/base/with-extra-envs.yaml

image:
  repository: mendhak/http-https-echo
  tag: 34

containerPort: 8080

configs:
  ROLLOUT_TRIGGER_VERSION: "8"

extraEnv:
  MY_CUSTOM_ENV_KEY1: MY_CUSTOM_ENV_VALUE1
  MY_CUSTOM_ENV_KEY2: MY_CUSTOM_ENV_VALUE2
  MY_CUSTOM_ENV_KEY3:
    valueFrom:
      configMapKeyRef:
        name: app-config-map
        key: MY_CUSTOM_ENV_KEY3_IN_CONFIG_MAP
        optional: true
  MY_CUSTOM_ENV_KEY4:
    configMapKeyRef:
      name: app-config-map
      key: MY_CUSTOM_ENV_KEY4_IN_CONFIG_MAP
      optional: true
  MY_CUSTOM_ENV_KEY5:
    secretKeyRef:
      name: app-secret
      key: MY_CUSTOM_ENV_KEY4_IN_SECRET
      optional: true
  MY_CUSTOM_ENV_KEY6:
    fieldRef:
      fieldPath: spec.nodeName

service:
  enabled: true
  type: ClusterIP

autoscaling:
  enabled: true
  minReplicas: 1
  maxReplicas: 5
  targetCPUUtilizationPercentage: 99

pdb:
  enabled: true
  minAvailable: 1

readinessProbe:
  initialDelaySeconds: 5
  failureThreshold: 1
  httpGet:
    path: /health
    port: http
livenessProbe:
  initialDelaySeconds: 5
  failureThreshold: 3
  httpGet:
    path: /health
    port: http
resources:
  requests:
    cpu: 100m

setIngressClassByField: true
ingress:
  enabled: true
  class: nginx
  hosts:
    - host: http-echo-with-extra-envs.localhost
      paths:
        - path: "/ping"
